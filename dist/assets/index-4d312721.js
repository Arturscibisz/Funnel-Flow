import{createClient as S}from"https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.38.4/+esm";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))d(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();const N="https://vwvxutxukcttglvcequy.supabase.co",q="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ3dnh1dHh1a2N0dGdsdmNlcXV5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkyOTIwNDUsImV4cCI6MjA2NDg2ODA0NX0.cipkyjiEjHUJF4LfyTK7HdNNldhHIfhCgMtz521OKaw",w=S(N,q);async function O(o,l){try{const{data:r,error:d}=await w.auth.signInWithPassword({email:o,password:l});if(d)throw d;const{data:s,error:n}=await w.from("user_roles").select(`
        role_id,
        roles:role_id (
          id,
          name,
          permissions
        )
      `).eq("user_id",r.user.id);if(n)throw n;const{data:c,error:u}=await w.from("user_profiles").select("*").eq("id",r.user.id).single();if(u)throw u;const p={id:r.user.id,email:r.user.email,firstName:c.first_name,lastName:c.last_name,company:c.company,avatarUrl:c.avatar_url,roles:s.map(m=>({id:m.roles.id,name:m.roles.name,permissions:m.roles.permissions}))};return localStorage.setItem("user",JSON.stringify(p)),localStorage.setItem("session",JSON.stringify(r.session)),{success:!0,user:p}}catch(r){return console.error("Błąd podczas logowania:",r),{success:!1,error:r.message}}}document.addEventListener("DOMContentLoaded",()=>{const o=document.querySelector(".neon-button"),l=document.querySelector(".glow-point"),r=document.querySelector(".login-form"),d=document.getElementById("email"),s=document.getElementById("password"),n=document.getElementById("email-glow"),c=document.getElementById("password-glow");let u,p,m,g=0,y;const x=.01;function f(){u=o.getBoundingClientRect(),p=u.width/2,m=u.height/2}function L(i,a,e){const t=document.createElement("div");t.classList.add("glow-blur"),t.style.left=`${i}px`,t.style.top=`${a}px`,t.style.width="10px",t.style.height="10px",t.style.borderRadius="50%",t.style.background="radial-gradient(circle, rgba(255, 255, 255, 0.8) 0%, rgba(255, 20, 147, 0.3) 70%, transparent 100%)",t.style.position="absolute",t.style.transform="translate(-50%, -50%)",e.appendChild(t),setTimeout(()=>{t.style.opacity="0",t.style.width="25px",t.style.height="25px",setTimeout(()=>{t.remove()},300)},10)}function b(){const i=p+(u.width/2-10)*Math.cos(g),a=m+(u.height/2-10)*Math.sin(g);l.style.left=`${i}px`,l.style.top=`${a}px`,l.style.opacity="1",L(i,a,r),g+=x,g>=Math.PI*2&&(g=0),y=requestAnimationFrame(b)}function E(){f(),y&&cancelAnimationFrame(y),y=requestAnimationFrame(b)}f(),window.addEventListener("resize",f),E(),o.addEventListener("mouseenter",()=>{o.classList.add("hover-active")}),o.addEventListener("mouseleave",()=>{o.classList.remove("hover-active")});function v(i,a){i.addEventListener("focus",()=>{i.getBoundingClientRect();const e=document.createElement("div");if(e.classList.add("input-glow-effect"),e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.borderRadius="12px",e.style.boxShadow="0 0 15px rgba(138, 43, 226, 0.5), 0 0 30px rgba(255, 20, 147, 0.3)",e.style.opacity="0",e.style.animation="pulse-glow 2s infinite",a.appendChild(e),!document.querySelector("#pulse-glow-keyframes")){const t=document.createElement("style");t.id="pulse-glow-keyframes",t.textContent=`
          @keyframes pulse-glow {
            0% { opacity: 0.3; }
            50% { opacity: 0.7; }
            100% { opacity: 0.3; }
          }
        `,document.head.appendChild(t)}}),i.addEventListener("blur",()=>{const e=a.querySelector(".input-glow-effect");e&&e.remove()})}v(d,n),v(s,c);function I(i){const a=document.querySelector(".error-message");a&&a.remove();const e=document.createElement("div");if(e.classList.add("error-message"),e.textContent=i,e.style.color="#f44336",e.style.fontSize="14px",e.style.marginTop="10px",e.style.textAlign="center",e.style.animation="fadeIn 0.3s",!document.querySelector("#error-keyframes")){const t=document.createElement("style");t.id="error-keyframes",t.textContent=`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-10px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `,document.head.appendChild(t)}r.appendChild(e)}r.addEventListener("submit",async i=>{i.preventDefault();const a=d.value.trim(),e=s.value.trim();o.textContent="Logowanie...",o.disabled=!0;try{(await O(a,e)).success?(o.textContent="Sukces!",o.style.background="linear-gradient(90deg, rgba(138, 43, 226, 0.8), rgba(255, 20, 147, 0.8))",setTimeout(()=>{window.location.href="dashboard.html"},1e3)):(I("Niepoprawny email lub hasło. Spróbuj ponownie."),o.classList.add("error"),o.textContent="Zaloguj się",o.disabled=!1,setTimeout(()=>{o.classList.remove("error")},1e3))}catch(t){console.error("Błąd logowania:",t),I("Wystąpił błąd podczas logowania. Spróbuj ponownie później."),o.textContent="Zaloguj się",o.disabled=!1}});const C=document.querySelector(".theme-toggle"),h=document.querySelector(".toggle-icon");localStorage.getItem("theme")==="light"&&(document.body.classList.add("light-mode"),h.textContent="☀️"),C.addEventListener("click",()=>{document.body.classList.toggle("light-mode"),document.body.classList.contains("light-mode")?(h.textContent="☀️",localStorage.setItem("theme","light")):(h.textContent="🌙",localStorage.setItem("theme","dark"))})});document.addEventListener("mousemove",o=>{const l=(o.clientX-window.innerWidth/2)*.01,r=(o.clientY-window.innerHeight/2)*.01;document.body.style.backgroundPosition=`${l}px ${r}px`});
//# sourceMappingURL=index-4d312721.js.map
